<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ZARUverse | Unveil the Myth</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0f0f0f" />
  <meta name="description" content="ZARUverse â€” Mythic code, viral power. Token, NFT, DAO, and lore-driven crypto ecosystem." />
  <style>
    :root {
      --bg: #0b0b0c;
      --gold: #ffd700;
      --text: #e8e8e8;
      --muted: #bdbdbd;
      --line: rgba(255,215,0,.12);
      --teal: #00c9a7;
      --danger: #ff7066;
      --warn: #ffd166;
      --ok: #00c9a7;
    }
    * { box-sizing: border-box; margin: 0; padding: 0 }
    body {
      background: radial-gradient(1200px 600px at 50% -10%, #1b1b1f, #0d0d10 55%, #0a0a0c);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      line-height: 1.6;
    }
    a { color: var(--gold); text-decoration: none }

    /* Header */
    header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 14px 20px; background: rgba(10,10,12,.7); backdrop-filter: blur(8px);
      border-bottom: 1px solid var(--line); position: sticky; top: 0; z-index: 100;
    }
    .brand { display: flex; align-items: center; gap: 10px; font-weight: 800; color: var(--gold) }
    .brand img { width: 40px; height: 40px; border-radius: 10px }
    .menu-toggle {
      font-size: 24px; background: none; border: 1px solid var(--line); border-radius: 10px;
      color: var(--gold); cursor: pointer; padding: 6px 10px;
    }
    nav {
      position: absolute; top: 60px; right: 20px;
      background: #111; border: 1px solid var(--line);
      border-radius: 12px; padding: 10px; display: none;
      flex-direction: column; gap: 10px; min-width: 220px;
    }
    nav.show { display: flex }
    nav a, nav button.link {
      font-size: 14px; font-weight: 700; color: var(--gold);
      padding: 8px 10px; border-radius: 8px; text-align: left; background: transparent; border: none; cursor: pointer;
    }
    nav a:hover, nav button.link:hover { background: rgba(255,215,0,.07) }

    /* Sections */
    .hero { text-align: center; padding: 84px 20px 56px; border-bottom: 1px solid var(--line) }
    .hero h1 { font-size: clamp(28px,6vw,48px); color: var(--gold); margin-bottom: 12px }
    .hero p { font-size: 16px; color: #ccc; max-width: 760px; margin: 0 auto 18px }
    .buttons { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px }

    .btn { padding: 12px 16px; border-radius: 12px; font-weight: 800; border: 1px solid var(--line); cursor: pointer; transition: transform .12s ease, box-shadow .2s ease }
    .btn.primary { background: var(--teal); color: #0b0b0c }
    .btn.outline { background: transparent; color: var(--gold) }
    .btn.gold { background: rgba(255,215,0,.12); color: var(--gold) }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(0,0,0,.25) }
    .pulse { animation: pulseGlow 1.8s infinite }
    @keyframes pulseGlow {
      0% { box-shadow: 0 0 0px rgba(255,215,0,0.15) }
      50% { box-shadow: 0 0 14px rgba(255,215,0,0.35) }
      100% { box-shadow: 0 0 0px rgba(255,215,0,0.15) }
    }
    .glow { color: var(--gold); text-shadow: 0 0 8px rgba(255,215,0,0.6) }
    .fade-in { opacity: 0; animation: fadeIn 1.2s ease forwards }
    .fade-in.delay { animation-delay: .6s }
    @keyframes fadeIn { to { opacity: 1 } }

    .section { padding: 48px 20px; border-top: 1px solid var(--line) }
    .section h2 { color: var(--gold); font-size: clamp(22px,4vw,34px); margin-bottom: 8px; text-align: center }
    .section p { color: var(--muted); max-width: 840px; margin: 0 auto 12px; text-align: center }

    /* Lore box */
    .lore-box {
      max-width: 900px; margin: 16px auto 0; background: #101012;
      border: 1px solid var(--line); border-radius: 14px; padding: 16px; text-align: left;
      display: none;
    }
    .lore-box.show { display: block; animation: reveal .4s ease }
    @keyframes reveal { from { opacity: .2; transform: translateY(6px) } to { opacity: 1; transform: translateY(0) } }
    .status { margin-top: 12px; color: #cfcfcf; font-size: 14px; text-align: center }

    /* Swap frame */
    iframe.swap { width: 100%; max-width: 1000px; height: 540px; border: none; border-radius: 14px; background: #111; margin: 16px auto 0; display: block }

    /* Footer */
    footer { text-align: center; padding: 40px 20px; border-top: 1px solid var(--line) }
    footer .row { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 10px }
    footer a { font-size: 14px; color: var(--gold) }
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <a class="brand" href="https://zaruverse.github.io">
      <img src="zaru-lion-logo.jpg" alt="ZARUverse logo" />
      <span>ZARUverse</span>
    </a>
    <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
    <nav id="menu">
      <a href="https://zaruverse.github.io">Home</a>
      <a href="https://zaruverse.github.io/whitepaper.html">Whitepaper</a>
      <a href="https://zaruverse.github.io/tokensale.html">Token Sale</a>
      <a href="https://zaruverse.github.io/docs">Docs</a>
      <a href="https://zaruverse.gitbook.com">GitBook</a>
      <a href="https://arxium-leader-of-dao.mintpad.me/">Arxium NFT</a>
      <button class="link" onclick="scrollToLore()">Lore Access â–¾</button>
    </nav>
  </header>

  <!-- Hero -->
  <section class="hero">
    <h1 class="fade-in">UNVEIL THE MYTH. <span class="glow">CLAIM YOUR RELIC.</span></h1>
    <p class="fade-in delay">Arxium isnâ€™t just an NFT. Itâ€™s your command seat in the DAO. Your key to encrypted lore. Your symbol of power.</p>
    <div class="buttons">
      <a class="btn primary pulse" href="https://arxium-leader-of-dao.mintpad.me/">Claim Arxium NFT</a>
      <a class="btn outline" href="https://pancakeswap.finance/swap?outputCurrency=0xdac6f0ec5901b3877dc6db23c3882267ba9fabf6">Buy ZARU on PancakeSwap</a>
      <a class="btn gold" href="https://zaruverse.github.io/whitepaper.html">Read the Prophecy</a>
    </div>
    <div style="margin-top: 18px; font-size: 14px; color: #ccc;">
      <strong>278 of 333 Relics claimed.</strong> Remaining: <span style="color: var(--gold)">55</span>
      <br />Next lore unlock in: <span style="color: var(--gold)">3 days 14 hours</span>
    </div>
  </section>

  <!-- Lore Gating -->
  <section id="lore" class="section">
    <h2>Lore access</h2>
    <p>Only Arxium holders can decrypt the prophecy. Connect your wallet to begin.</p>
    <div class="buttons" style="justify-content:center;">
      <button class="btn primary" onclick="connectWallet()">ðŸ”“ Connect Wallet</button>
      <button class="btn outline" onclick="unlockLore()">Unlock Lore</button>
    </div>
    <div id="status" class="status"></div>
    <div id="loreBox" class="lore-box">
      <h3 style="color:var(--gold); margin-bottom:8px;">Encrypted Prophecy</h3>
      <div id="loreContent" style="white-space:pre-wrap; color:#e6e6e6;"></div>
    </div>
  </section>

  <!-- Swap -->
  <section class="section">
    <h2>Swap to ZARU</h2>
    <p>Convert any token to ZARU on PancakeSwap. Claim your share of the Verse.</p>
    <iframe class="swap" src="https://pancakeswap.finance/swap?outputCurrency=0xdac6f0ec5901b3877dc6db23c3882267ba9fabf6" title="Swap to ZARU on PancakeSwap"></iframe>
  </section>

  <!-- Community -->
  <section class="section">
    <h2>Community and channels</h2>
    <p>Join the ZARUverse across platforms. Build, vote, and claim your place in the myth.</p>
    <div class="buttons" style="justify-content:center;">
      <a class="btn primary" href="https://t.me/zaruverse">Telegram</a>
      <a class="btn outline" href="https://x.com/zaruverse">X</a>
      <a class="btn gold" href="https://youtube.com/@zaruverse">YouTube</a>
      <a class="btn outline" href="https://discord.gg/EWVcrwwJ">Discord</a>
      <a class="btn outline" href="https://github.com/zaruverse">GitHub</a>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="row">
      <a href="https://zaruverse.github.io">Home</a>
      <a href="https://zaruverse.github.io/whitepaper.html">Whitepaper</a>
      <a href="https://zaruverse.github.io/tokensale.html">Token Sale</a>
      <a href="https://zaruverse.github.io/docs">Docs</a>
      <a href="https://zaruverse.gitbook.com">GitBook</a>
      <a href="https://arxium-leader-of-dao.mintpad.me/">Arxium NFT</a>
    </div>
    <div class="row">
      <a href="mailto:zaru.verse@makese.site">zaru.verse@makese.site</a>
    </div>
    <div class="row">
      <span>Â© ZARUverse. All rights reserved.</span>
    </div>
  </footer>

  <!-- Ethers + Web3Modal + WalletConnect (v1) -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/web3modal@1.9.12/dist/index.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>

  <script>
    // ====== CONFIG ======
    const BSC_CHAIN_ID = 56;
    const NFT_CONTRACT = "0x57664ea40e95636ed7a4df35f4b31e3656a851cd";
    const IPFS_LORE_CID = "bafkreias7mdy6vti7xopxdrpaikwmpnrxjubcjojdzk2pwqksvstzf2bty";
    const IPFS_GATEWAYS = [
      "https://ipfs.io/ipfs/",
      "https://cloudflare-ipfs.com/ipfs/",
      "https://gateway.pinata.cloud/ipfs/"
    ];
    // =====================

    const ERC721_ABI = [
      "function balanceOf(address owner) view returns (uint256)"
    ];

    let web3Modal, externalProvider, ethersProvider, signer, userAddress;

    function toggleMenu() {
      document.getElementById('menu').classList.toggle('show');
    }
    function scrollToLore() {
      document.getElementById('menu').classList.remove('show');
      document.getElementById('lore').scrollIntoView({ behavior: 'smooth' });
    }
    function setStatus(msg, color = "#cfcfcf") {
      const el = document.getElementById('status');
      el.style.color = color;
      el.textContent = msg;
    }
    function shorten(addr) {
      return addr ? (addr.slice(0,6) + "..." + addr.slice(-4)) : "";
    }

    // Init Web3Modal
    (function initWeb3Modal(){
      const providerOptions = {
        walletconnect: {
          package: window.WalletConnectProvider.default,
          options: {
            rpc: { 56: "https://bsc-dataseed.binance.org" },
            chainId: 56
          }
        }
      };
      web3Modal = new window.Web3Modal.default({
        cacheProvider: false,
        providerOptions,
        theme: "dark"
      });
    })();

    async function connectWallet() {
      try {
        setStatus("Connecting wallet...");
        externalProvider = await web3Modal.connect();
        ethersProvider = new ethers.providers.Web3Provider(externalProvider, "any");
        signer = ethersProvider.getSigner();
        userAddress = await signer.getAddress();

        // Chain check
        const net = await ethersProvider.getNetwork();
        if (net.chainId !== BSC_CHAIN_ID) {
          setStatus("Wrong network. Switching to BNB Smart Chain...", "#ffd700");
          await switchToBSC();
        }

        setStatus("Wallet connected: " + shorten(userAddress), "#00c9a7");

        // React to chain/account changes
        externalProvider.on && externalProvider.on('accountsChanged', (accs) => {
          userAddress = accs && accs[0] ? accs[0] : null;
          setStatus(userAddress ? ("Wallet: " + shorten(userAddress)) : "Wallet disconnected", userAddress ? "#00c9a7" : "#cfcfcf");
        });
        externalProvider.on && externalProvider.on('chainChanged', async () => {
          const n = await ethersProvider.getNetwork();
          if (n.chainId !== BSC_CHAIN_ID) setStatus("Wrong network. Please switch to BSC.", "#ffd700");
        });

      } catch (err) {
        setStatus("Connection cancelled.", "#ff7066");
      }
    }

    async function switchToBSC() {
      try {
        await externalProvider.request({
          method: 'wallet_switchEthereumChain',
          params: [{ chainId: '0x38' }] // 56
        });
      } catch (switchError) {
        // If not added, add BSC
        if (switchError.code === 4902 || (switchError.data && switchError.data.originalError && switchError.data.originalError.code === 4902)) {
          await externalProvider.request({
            method: 'wallet_addEthereumChain',
            params: [{
              chainId: '0x38',
              chainName: 'BNB Smart Chain",
              nativeCurrency: { name: 'BNB', symbol: 'BNB', decimals: 18 },
              rpcUrls: ['https://bsc-dataseed.binance.org'],
              blockExplorerUrls: ['https://bscscan.com']
            }]
          });
        }
      }
    }

    async function unlockLore() {
      try {
        if (!signer) {
          setStatus("Please connect your wallet first.", "#ffd700");
          return;
        }
        const net = await ethersProvider.getNetwork();
        if (net.chainId !== BSC_CHAIN_ID) {
          setStatus("Wrong network. Switch to BNB Smart Chain.", "#ffd700");
          return;
        }

        setStatus("Checking Arxium ownership...");
        const contract = new ethers.Contract(NFT_CONTRACT, ERC721_ABI, ethersProvider);
        const balance = await contract.balanceOf(userAddress);

        if (balance && ethers.BigNumber.from(balance).gt(0)) {
          setStatus("Access granted. Decrypting lore from IPFS...", "#00c9a7");
          const lore = await fetchFromIPFS(IPFS_LORE_CID);
          if (!lore) {
            setStatus("Lore fetch failed. Try again or check CID.", "#ffd166");
            return;
          }
          showLore(lore);
        } else {
          setStatus("Access denied. You must hold an Arxium Relic.", "#ff7066");
          const box = document.getElementById('loreBox');
          const content = document.getElementById('loreContent');
          content.innerHTML = 'You must hold an Arxium Relic to unlock the lore.\n\n' +
            '<a href="https://arxium-leader-of-dao.mintpad.me/" style="color:var(--gold);">Claim yours now â†’</a>';
          box.classList.add('show');
        }
      } catch (err) {
        setStatus("Error during unlock. Open console for details.", "#ff7066");
        console.error(err);
      }
    }

    async function fetchFromIPFS(cid) {
      for (const base of IPFS_GATEWAYS) {
        try {
          const res = await fetch(base + cid, { cache: "no-store" });
          if (!res.ok) continue;
          const text = await res.text();
          if (text && text.length > 0) return text;
        } catch (_) {}
      }
      return null;
    }

    function showLore(text) {
      const box = document.getElementById('loreBox');
      const content = document.getElementById('loreContent');
      content.textContent = "";
      box.classList.add('show');

      // Typewriter effect
      let i = 0;
      const speed = 12; // ms per char
      function type() {
        if (i < text.length) {
          content.textContent += text.charAt(i);
          i++;
          requestAnimationFrame(() => setTimeout(type, speed));
        }
      }
      type();
    }
  </script>
</body>
</html>
