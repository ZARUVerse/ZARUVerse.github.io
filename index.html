<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ZARUverse | Claim the Relic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b0b0c" />
  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: #0b0b0c;
      color: #e8e8e8;
    }
    header {
      background: #0b0b0c;
      border-bottom: 1px solid rgba(255,215,0,.12);
    }
    .mobile-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 20px;
    }
    .brand {
      font-weight: 800;
      color: #ffd700;
      font-size: 20px;
      text-decoration: none;
    }
    .hamburger {
      font-size: 24px;
      background: none;
      border: none;
      color: #ffd700;
      cursor: pointer;
    }
    .mobile-menu {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      padding: 0;
      transition: max-height 0.4s ease, opacity 0.3s ease, padding 0.3s ease;
      background: #111;
      border-top: 1px solid rgba(255,215,0,.12);
      display: flex;
      flex-direction: column;
    }
    .mobile-menu.show {
      max-height: 1000px;
      opacity: 1;
      padding: 10px 0;
    }
    .mobile-menu a {
      padding: 12px 20px;
      font-size: 16px;
      color: #ffd700;
      text-decoration: none;
      border-bottom: 1px solid rgba(255,215,0,.08);
    }
    main {
      padding: 40px 20px;
      text-align: center;
    }
    footer {
      padding: 40px 20px;
      border-top: 1px solid rgba(255,215,0,.12);
      text-align: center;
      font-size: 14px;
      color: #aaa;
    }
    .btn {
      padding: 10px 16px;
      border-radius: 10px;
      border: 1px solid rgba(255,215,0,.12);
      color: #ffd700;
      background: transparent;
      cursor: pointer;
      font-weight: 700;
    }
    .btn.primary {
      background: #ffd700;
      color: #0b0b0c;
      border: none;
      font-weight: 900;
    }
  </style>
</head>
<body>

<header>
  <div class="mobile-header">
    <a class="brand" href="https://zaruverse.github.io">ZARUverse</a>
    <button class="hamburger" onclick="toggleMobileMenu()">☰</button>
  </div>
  <nav id="mobileMenu" class="mobile-menu">
    <a href="https://zaruverse.github.io">🏠 Main Site</a>
    <a href="https://zaruverse.github.io/whitepaper.html">📜 Whitepaper</a>
    <a href="https://zaruverse.github.io/tokensale.html">💰 Token Sale</a>
    <a href="https://zaruverse.github.io/docs">📚 Docs</a>
    <a href="https://zaruverse.gitbook.com">📘 GitBook</a>
    <a href="https://arxium-leader-of-dao.mintpad.me/">🛡️ Arxium NFT</a>
    <a href="https://github.com/zaruverse">💻 GitHub</a>
    <a href="https://github.com/zaruverse/zarutoken-contract">🧠 Token Contract</a>
    <a href="https://github.com/zaruverse/zarutoken-contract/whitepaper.pdf">📄 PDF Whitepaper</a>
    <a href="https://www.geckoterminal.com/bsc/pools/0x8555f1aa6abe1f5ee6e1be2adf33ae0d9a807ef6">📊 GeckoTerminal</a>
    <a href="https://dex.coinmarketcap.com/token/BSC/0xdac6f0ec5901b3877dc6db23c3882267ba9fabf6">📈 CMC DEX</a>
    <a href="https://bitcointalk.org/index.php?topic=5558498.new#new">🗣️ Bitcointalk</a>
    <a href="mailto:zaru.verse@makese.site">📩 Contact</a>
    <a href="https://t.me/zaruverse">📲 Telegram</a>
    <a href="https://t.me/zaruversebot/app">🤖 Telegram Bot</a>
    <a href="https://t.me/zaru-eco">🌱 Telegram Eco</a>
    <a href="https://discord.gg/EWVcrwwJ">💬 Discord</a>
    <a href="https://x.com/zaruverse">🐦 X (Twitter)</a>
    <a href="https://facebook.com/zaruverse">📘 Facebook</a>
    <a href="https://instagram.com/zaruverse">📷 Instagram</a>
    <a href="https://youtube.com/@zaruverse?si=FQYqOELc_yMXLuuA">📺 YouTube</a>
    <a href="https://reddit.com/u/zaruverse">👽 Reddit</a>
    <a href="https://hey.xyz/u/zaruverse">🧑‍🚀 Hey.xyz</a>
    <a href="https://www.linkedin.com/in/zaruverse">💼 LinkedIn</a>
    <a href="https://bsky.app/profile/makese.site">🌌 Bluesky</a>
  </nav>
</header>

<main>
  <h1 style="color:#ffd700; font-size:32px;">Claim the Relic. Unlock the Lore.</h1>
  <p style="max-width:600px; margin:20px auto; font-size:16px;">
    Arxium isn’t just an NFT. It’s your command seat in the DAO. Your key to encrypted prophecy. Your symbol of power.
  </p>
  <a href="https://arxium-leader-of-dao.mintpad.me/" class="btn primary">🛡️ Mint Arxium</a>

  <div style="margin-top:60px;">
    <h2 style="color:#ffd700;">🔓 Unlock the Lore</h2>
    <p id="walletStatus">Connect your wallet to verify ownership of Arxium NFT.</p>
    <button onclick="connectWallet()" class="btn primary">🔗 Connect Wallet</button>
    <button onclick="disconnectWallet()" class="btn">⛓ Disconnect</button>
    <div id="loreOutput" style="margin-top:30px; font-size:16px; max-width:600px; margin-left:auto; margin-right:auto; white-space:pre-wrap;"></div>
  </div>
</main>

<footer>
  <div>© ZARUverse. All rights reserved.</div>
  <div style="margin-top:8px;">Built for the uncrowned kings of crypto.</div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/web3modal@1.9.12/dist/index.js"></script>

<script>
  function toggleMobileMenu() {
    document.getElementById('mobileMenu').classList.toggle('show');
  }

  const CONTRACT_ADDRESS = "0x57664ea40e95636ed7a4df35f4b31e3656a851cd";
  const ABI = [ { "constant":true, "inputs":[{"name":"owner","type":"address"}], "name":"
    "uint256"}], "type":"function" } ];
  const IPFS_LORE = "https://ipfs.io/ipfs/bafkreias7mdy6vti7xopxdrpaikwmpnrxjubcjojdzk2pwqksvstzf2bty";

  let web3Modal, provider, web3, userAddress;

  async function connectWallet() {
    const providerOptions = {
      walletconnect: {
        package: window.WalletConnectProvider,
        options: {
          rpc: { 56: "https://bsc-dataseed.binance.org/" },
          chainId: 56
        }
      }
    };

    web3Modal = new window.Web3Modal.default({
      cacheProvider: false,
      providerOptions
    });

    try {
      provider = await web3Modal.connect();
      web3 = new Web3(provider);

      provider.on && provider.on('accountsChanged', (accounts) => handleAccountsChanged(accounts));
      provider.on && provider.on('chainChanged', (chainId) => handleChainChanged(chainId));
      provider.on && provider.on('disconnect', () => disconnectWallet());

      const accounts = await web3.eth.getAccounts();
      handleAccountsChanged(accounts);
    } catch (err) {
      setStatus("❌ Wallet connection failed.");
    }
  }

  function setStatus(text) {
    document.getElementById("walletStatus").innerText = text;
  }

  function handleAccountsChanged(accounts) {
    if (!accounts || !accounts.length) {
      userAddress = undefined;
      setStatus("🪪 Wallet connected. No account selected.");
      return;
    }
    userAddress = accounts[0];
    setStatus(`✅ Connected: ${short(userAddress)} | BNB Chain expected`);
    checkOwnership();
  }

  async function handleChainChanged(chainIdHex) {
    const chainId = parseInt(chainIdHex, 16);
    if (chainId !== 56) {
      setStatus(`⚠️ Wrong network (ChainId ${chainId}). Switch to BNB Chain (56).`);
    } else {
      setStatus(`✅ Connected: ${short(userAddress)} | BNB Chain`);
      checkOwnership();
    }
  }

  function short(addr) {
    return addr ? addr.slice(0,6) + "..." + addr.slice(-4) : "";
  }

  async function disconnectWallet() {
    try {
      if (provider && provider.disconnect) await provider.disconnect();
    } catch(e) {}
    provider = undefined;
    web3 = undefined;
    userAddress = undefined;
    setStatus("🔌 Disconnected. Connect to unlock the lore.");
    document.getElementById("loreOutput").innerText = "";
  }

  async function checkOwnership() {
    try {
      const netId = await web3.eth.getChainId();
      if (netId !== 56) {
        setStatus(`⚠️ Wrong network (ChainId ${netId}). Please switch to BNB Chain (56).`);
        return;
      }
      const contract = new web3.eth.Contract(ABI, CONTRACT_ADDRESS);
      const balance = await contract.methods.balanceOf(userAddress).call();
      if (Number(balance) > 0) {
        setStatus(`🛡️ Holder verified — ${short(userAddress)} | Loading lore...`);
        fetchLore();
      } else {
        document.getElementById("loreOutput").innerText =
          "🚫 No Arxium detected. Mint the relic to unlock encrypted prophecy.";
      }
    } catch (err) {
      document.getElementById("loreOutput").innerText = "⚠️ Verification failed. Check contract address/ABI/network.";
    }
  }

  async function fetchLore() {
    try {
      const res = await fetch(IPFS_LORE, { cache: "no-store" });
      if (!res.ok) throw new Error("IPFS fetch failed");
      const text = await res.text();
      typeLore(text);
    } catch (err) {
      document.getElementById("loreOutput").innerText = "⚠️ Failed to load lore from IPFS.";
    }
  }

  function typeLore(text) {
    const out = document.getElementById("loreOutput");
    out.innerHTML = "";
    let i = 0;
    const speed = 26;
    const timer = setInterval(() => {
      out.innerHTML += text[i] || "";
      i++;
      if (i >= text.length) clearInterval(timer);
    }, speed);
  }
</script>

</body>
</html>
